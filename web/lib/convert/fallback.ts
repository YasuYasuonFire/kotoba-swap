const REPLACEMENTS: Array<[RegExp, string]> = [
  [/食べて飲んでばっかり(だ|です)?/g, "栄養をしっかりチャージ中"],
  [/おせち(作るの)?(めんどくさい|面倒)/g, "伝統は心で！スーパーのお惣菜も立派なおせち"],
  [/食べ過ぎ(で)?死にそう/g, "おすそ分け文化を大切に！消化に良いお茶を添えて"],
  [/ダラダラしすぎ(てる|てるわ)?/g, "充電期間として最適！来年の英気を養っている"],
  [/布団から出られない/g, "布団の中は安全地帯！ゆっくり充電タイム"],
  [/何もしたくない/g, "『何もしない』という選択も素晴らしい！心の声に従う"],
  [/勉強する気(が)?起きない/g, "実践的な学びが一番！来年こそはアクティブに学ぼう"],
  [/何もしてない/g, "自己成長の旅は続きます！小さな一歩から始めよう"],
  [/何も学ばなかった/g, "人生は最高の教科書！今年の経験が来年の糧になる"],
  [/お酒飲みすぎ(た)?/g, "適度なリラックスは必要！肝臓を労わりつつ楽しむ"],
  [/体重増えたかも/g, "健康は心の豊かさから！適度な運動と食事を心がける"],
  [/風邪引いたかも/g, "体からの休息サイン！ゆっくり休んで英気を養う"],
  [/面倒くさい/g, "心の準備が大事！来年の仕事も頑張ろう"],
  [/怖い/g, "不安があるのは真面目に向き合っている証拠"],
  [/やる気(が)?行方不明/g, "充電モードに入っているだけ"],
];

function postfix(style: "やわらかく" | "ビジネス丁寧" | "前向き") {
  switch (style) {
    case "やわらかく":
      return "（お手数ですが、ご検討いただけますと幸いです）";
    case "前向き":
      return "（助かります。ありがとうございます）";
    case "ビジネス丁寧":
    default:
      return "（恐れ入りますが、よろしくお願いいたします）";
  }
}

export function fallbackConvert(params: {
  text: string;
  style: "やわらかく" | "ビジネス丁寧" | "前向き";
}): { converted: string; alternatives: string[] } {
  let s = params.text.trim();
  for (const [re, to] of REPLACEMENTS) s = s.replace(re, to);

  const base = s.endsWith("。") ? s : `${s}。`;
  const converted = `${base}${postfix(params.style)}`;
  const alternatives = [
    `${base}差し支えなければ、状況と見込みをご共有ください。`,
    `${base}優先度の調整が必要であればご相談ください。`,
  ];
  return { converted, alternatives };
}


